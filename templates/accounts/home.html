{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Milk Billing Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style> body{margin:0} .sidebar{width:250px;min-height:100vh;background:#343a40;position:fixed;left:0;top:0} .sidebar h4{color:#fff;text-align:center;padding:15px} .sidebar a{color:#fff;display:block;padding:12px 15px;text-decoration:none} .main-content{margin-left:250px;padding:30px} @media(max-width:768px){.sidebar{position:relative;width:100%}.main-content{margin-left:0}}</style>
</head>
<body>
  <div class="sidebar">
    <h4>ğŸ¥› Milk Billing</h4>
    <a href="{% url 'accounts:home' %}">ğŸ  Dashboard</a>
    <a href="{% url 'accounts:customer_list' %}">ğŸ‘¥ Customers</a>
    <a href="{% url 'accounts:add_entry' %}">â• Add Entry</a>
    <a href="{% url 'accounts:monthly_summary' %}">ğŸ“… Monthly Summary</a>
  </div>

  <div class="main-content">
    <h2>ğŸ“Š Dashboard</h2>
    <div class="row mb-4">
      <div class="col-md-4"><div class="card"><div class="card-body"><h6>Total Customers</h6><h3>{{ total_customers }}</h3></div></div></div>
      <div class="col-md-4"><div class="card"><div class="card-body"><h6>Total Milk (L)</h6><h3>{{ total_litres }}</h3></div></div></div>
      <div class="col-md-4"><div class="card"><div class="card-body"><h6>Total Balance (â‚¹)</h6><h3 class="{% if total_balance > 0 %}text-success{% elif total_balance < 0 %}text-danger{% endif %}">â‚¹ {{ total_balance }}</h3></div></div></div>
    </div>

    <div class="card">
      <div class="card-header bg-primary text-white">Recent Milk Entries</div>
      <div class="card-body p-0">
        <table class="table mb-0">
          <thead><tr><th>Date</th><th>Customer</th><th>Qty (ml)</th><th>Litres</th><th>Amount (â‚¹)</th></tr></thead>
          <tbody>
            {% for entry in last_entries %}
            <tr>
              <td>{{ entry.date|date:"d-m-Y" }}</td>
              <td>{{ entry.customer.name }}</td>
              <td>{{ entry.quantity_ml }}</td>
              <td>{{ entry.litres|floatformat:2 }}</td>
              <td>â‚¹ {{ entry.amount|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="5" class="text-center py-4">No entries yet â€” <a href="{% url 'accounts:add_entry' %}">Add one</a></td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>